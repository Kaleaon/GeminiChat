<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <title>Character Studio (Gemini Edition)</title>
    <link rel="stylesheet" crossorigin href="./index-CmdA3A6y.css" />
    <style>
      .gemini-banner {
        position: absolute;
        top: 12px;
        right: 16px;
        z-index: 2000;
        padding: 10px 16px;
        background: rgba(3, 18, 35, 0.8);
        border: 1px solid rgba(88, 185, 237, 0.45);
        border-radius: 12px;
        color: #e8f6ff;
        backdrop-filter: blur(6px);
        font-family: "Inter", "Roboto", sans-serif;
        max-width: 280px;
      }
      .gemini-banner strong {
        display: block;
        color: #ffd479;
      }
    </style>
  </head>
  <body>
    <canvas id="editor-scene" style="position: fixed; top: 0; left: 0;" width="100%" height="100%"></canvas>
    <div id="root" style="overflow: hidden;"></div>
    <div class="gemini-banner">
      <strong>New body sets</strong>
      Switch to the <em>Drophunter</em> or <em>Neurohacker</em> manifests for chunkier armor, cybernetic shells, and less anime silhouettes.
    </div>
    <script>
      window.__GEMINI_CHARACTER_STUDIO__ = window.__GEMINI_CHARACTER_STUDIO__ || {};
      window.__GEMINI_CHARACTER_STUDIO__.manifest = './manifest.json';
      window.applyCharacterStudioModifier = function (name, value) {
        if (window.CharacterStudio && typeof window.CharacterStudio.applyModifier === 'function') {
          try {
            window.CharacterStudio.applyModifier(name, value);
          } catch (err) {
            console.warn('Slider apply failed', err);
          }
        } else {
          window.dispatchEvent(new CustomEvent('GeminiCharacterStudioSlider', { detail: { name, value } }));
        }
      };
      window.requestGeminiAvatar = function (label = 'Character Studio Avatar') {
        const notify = (data) => {
          if (window.GeminiAvatarBridge && window.GeminiAvatarBridge.onAvatarExported) {
            window.GeminiAvatarBridge.onAvatarExported(label, JSON.stringify(data), 'CHARACTER_STUDIO');
          }
        };
        if (window.CharacterStudio && typeof window.CharacterStudio.exportAvatar === 'function') {
          Promise.resolve(window.CharacterStudio.exportAvatar())
            .then((data) => notify(data))
            .catch(() => notify({ manifest: window.__GEMINI_CHARACTER_STUDIO__.manifest }));
        } else {
          notify({ manifest: window.__GEMINI_CHARACTER_STUDIO__.manifest });
        }
      };
      window.loadExternalModel = function (url) {
        if (window.CharacterStudio && typeof window.CharacterStudio.loadExternalModel === 'function') {
          window.CharacterStudio.loadExternalModel(url);
        } else {
          window.dispatchEvent(new CustomEvent('GeminiExternalModel', { detail: { url } }));
        }
      };
    </script>
    <script type="module" crossorigin src="./index-Dsu9vlV4.js"></script>
    <script src="./ktx2/libktx.js"></script>
  </body>
</html>
